<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>Crystals Collector Game</title>

  <!-- Linking JQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Linking Google Fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat|Roboto+Slab|Yellowtail' rel='stylesheet' type='text/css'>

  <!-- Linking CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-md-offset-2 col-md-8">
        <div class="jumbotron">
          <h2>The Crystal Collector Game</h2>
          <h2>Collect the number of crystals to match the random number</h2>
          <h2>Wins:
            <span id="user-wins">
              <strong>0</strong>
            </span>
          </h2>
          <h2>Losses:
            <span id="user-losses">
              <strong>0</strong>
            </span>
          </h2>
          <!-- Here is where our random number will go -->
          <h1>Number to guess:
            <span id="number-to-guess"></span>
          </h1>
          <h1>Your total score:
            <span id="counter"></span>
          </h1>
        </div>
      </div>
    </div>
  </div>

  <div id="crystal-images">
    <img id="crystal1" src="assets/images/citrine-3201605__480.jpg">
    <img id="crystal2" src="assets/images/precious-stone-3259727__480.jpg">
    <img id="crystal3" src="assets/images/colored-glass-3092416__480.jpg">
    <img id="crystal4" src="assets/images/rock-crystal-1603480__480.jpg">
  </div>

  <script>

   var crystals = $("#crystals");

    var crystalArray = [
      "crystal1",
      "crystal2",
      "crystal3",
      "crystal4"
    ]

    var crystalValues = [];
    var randomNumber;
    var targetNumber;
    var counter = 0;
    var lossCount = 0;
    var winCount = 0;

    function pushRandomNumber() {
      randomNumber = Math.floor(Math.random() * 12)
      if (crystalValues.indexOf(randomNumber) === -1) {
        crystalValues.push(randomNumber);
      }
      else {
        pushRandomNumber();
      }
    }

    function createCrystals() {
      for (var i = 0; i < 4; i++) {
        pushRandomNumber();
        var imageCrystal = $("<img>");
        $("#container").append(`
        <img src=${crystalArray[i]} value=${randomNumber} />
      `)
        // Each Crystal will be given a data attribute called data-crystalValue.
        // This data attribute will be set equal to the array value.
        //    crystals.attr("data-crystalvalue", crystalValues[i]);
        crystals.attr("data-crystalvalue", crystalValues[i]);
      }
    }

    function getRandomInt(min, max) {
      targetNumber = Math.floor(Math.random() * 102) + 19;
      $("#number-to-guess").text(targetNumber);
    }


    function startGame() {
      createCrystals();
      getRandomInt();
    }

    startGame();

    $(document).on("click", "#crystal-images", function () {
      console.log(crystalValues);

//      var crystalValue = ($(this).attr("data-crystalvalue"));
//      crystalValue = parseInt(crystalArray[i]);
//      console.log(crystalValue);

      counter += crystalValues;
      $("#counter").text(counter);

      if (counter === targetNumber) {
        alert("You win!");
        winCount++;
        $("#user-wins").text(winCount);
      }

      else if (counter >= targetNumber) {
        alert("You lose!!");
        lossCount++;
        $("#user-losses").text(lossCount);
        startGame();
      }

    })

  </script>
</body>
<!--     * 4 options f)or user choice: buttons with point values from 1 to 12, randomly assigned, no dups 
         * Random number generator returns goal amount; possible values range from 19 to 120
         * 2 actors:  computer and user
         * OnClick event on buttons triggers game play/tally increment
         * gameplay continues until user matches or exceeds randomly generated number

        1. load page with randomly generated number and assign point values to each button
        2. wait for onClick event
        3. evaluate button selection, add point value to running tally
                  if running tally matches randomly generated number
                      increment win count and start over, generate new random number and reset button values
                  else
                      if running tally > randomly generated number
                          increment loss count and start over, generate new random number and reset button values
                      else    
                          if running tally < randomly generated number
                              wait for another button click
  -->

</html>